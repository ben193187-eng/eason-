<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ£®å¢ƒæ¼«éŠï½œè‹—æ —ç¶ è‰²æ—…å®¿åœ°åœ–</title>
    
    <link 
        rel="stylesheet" 
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/SJPMeR/JZQj7BwWc8=" 
        crossorigin=""
    />
    
    <link rel="stylesheet" href="style.css">
    
</head>
<body>

    <header>
        <h1>ğŸŒ³ æ£®å¢ƒæ¼«éŠ | Miaoli Green-Stay Map</h1>
        <p>æ¢ç´¢è‹—æ —åœ¨åœ°ã€æ°¸çºŒçš„æ–‡é’æ„Ÿæ—…å®¿ã€‚</p>
    </header>

    <main>
        <section class="map-container">
            <h2>ğŸŒ ç¶ è‰²æ—…å®¿èˆ‡æ™¯é»åœ°åœ–</h2>
            <div id="map"></div>
        </section>

        <section class="data-section">
            <h2>ğŸ¨ æ—…å®¿èˆ‡æ™¯é»åˆ—è¡¨</h2>
            <p>æ—…å®¿è³‡æ–™å°‡é¡¯ç¤ºåœ¨ä¸Šæ–¹åœ°åœ–ä¸­ã€‚</p>
        </section>
    </main>

    <script 
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20n6a9c8z9G6yH2Gq8W8m6Cg4Yc4kQ8jF0c4pS+g="
        crossorigin=""
    ></script>

    <script src="main.js"></script>
    
</body>
</html>
/* ç¢ºä¿åœ°åœ–å®¹å™¨æœ‰æ˜ç¢ºçš„é«˜åº¦ï¼Œå¦å‰‡åœ°åœ–ç„¡æ³•é¡¯ç¤º */
#map {
    height: 500px; /* æ‚¨å¯ä»¥ä¾æ“šéœ€æ±‚èª¿æ•´é«˜åº¦ */
    width: 100%;
    border: 1px solid #ccc;
    border-radius: 8px;
}

/* è®“ç¶²é çœ‹èµ·ä¾†æ›´ç¾è§€ */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f4f4f9;
}

header {
    text-align: center;
    padding: 10px 0;
    background-color: #e0f2f1;
    margin-bottom: 20px;
    border-radius: 8px;
}

.map-container {
    margin-bottom: 30px;
}
// æ—…å®¿è³‡æ–™ç¯„ä¾‹ (è«‹ç”¨æ‚¨å¯¦éš›çš„è³‡æ–™å–ä»£é€™å€‹é™£åˆ—)
// ç¢ºä¿æ¯å€‹ç‰©ä»¶éƒ½æœ‰ name, lat (ç·¯åº¦), lng (ç¶“åº¦)
const lodgingsData = [
    { name: "å±±å±…æ­²æœˆ", lat: 24.4205, lng: 120.9085, style: "æ–‡é’é¢¨" },
    { name: "æ£®æ—ä¹‹å®¶", lat: 24.5670, lng: 120.8250, style: "ç”Ÿæ…‹æ°¸çºŒ" },
    { name: "ä¸‰ç¾©å¥½å®¢æ°‘å®¿", lat: 24.3820, lng: 120.7600, style: "å®¶åº­" },
    { name: "è‹‘è£¡ç¶ å…‰", lat: 24.3980, lng: 120.7000, style: "ç°¡ç´„" },
];

// è‹—æ —ç¸£ä¸­å¿ƒåº§æ¨™å’Œèµ·å§‹ç¸®æ”¾ç­‰ç´š
const MIAOLI_CENTER = [24.500, 120.900];
const INITIAL_ZOOM = 10;

document.addEventListener('DOMContentLoaded', (event) => {
    // æª¢æŸ¥åœ°åœ–å®¹å™¨æ˜¯å¦å­˜åœ¨
    if (document.getElementById('map')) {
        initializeLeafletMap();
    }
});

function initializeLeafletMap() {
    // 1. åˆå§‹åŒ–åœ°åœ–å¯¦ä¾‹ (Map Object)
    const map = L.map('map').setView(MIAOLI_CENTER, INITIAL_ZOOM);
    
    // 2. åŠ å…¥ OpenStreetMap åœ–å±¤
    // L.tileLayer æ˜¯åœ°åœ–åº•åœ–çš„ä¾†æº
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: 'åœ°åœ–è³‡æ–™ Â© <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    // 3. éæ­·æ‰€æœ‰æ—…å®¿ä¸¦åœ¨åœ°åœ–ä¸Šæ”¾ç½®æ¨™è¨˜ (Marker)
    lodgingsData.forEach(lodging => {
        if (lodging.lat && lodging.lng) {
            
            // å»ºç«‹å½ˆå‡ºå¼è³‡è¨Šè¦–çª—çš„å…§å®¹
            const popupContent = `
                <h3>${lodging.name}</h3>
                <p>é¢¨æ ¼ï¼š${lodging.style}</p>
                <p>åº§æ¨™ï¼š${lodging.lat}, ${lodging.lng}</p>
                <button onclick="zoomToLocation(${lodging.lat}, ${lodging.lng})">æŸ¥çœ‹è©³æƒ…</button>
            `;
            
            // L.marker() å‰µå»ºæ¨™è¨˜ï¼Œä¸¦æ·»åŠ åˆ°åœ°åœ–
            L.marker([lodging.lat, lodging.lng]) 
                .addTo(map)
                .bindPopup(popupContent); // å°‡è³‡è¨Šè¦–çª—ç¶å®šåˆ°æ¨™è¨˜ä¸Š
        }
    });
    
    // 4. (å¯é¸) è®“åœ°åœ–é©æ‡‰æ‰€æœ‰æ¨™è¨˜ï¼Œç¢ºä¿æ‰€æœ‰é»éƒ½åœ¨è¦–é‡å…§
    // å¦‚æœ lodgingsData ä¸ç‚ºç©ºï¼Œå‰‡è¨ˆç®—é‚Šç•Œ
    if (lodgingsData.length > 0) {
        const bounds = lodgingsData.map(l => [l.lat, l.lng]);
        map.fitBounds(bounds, { padding: [50, 50] }); // è¨­ç½®åœ°åœ–é‚Šç•Œï¼Œä¸¦ç•™ç™½ 50px
    }
}

// (å¯é¸) ç¯„ä¾‹å‡½æ•¸ï¼šé»æ“ŠæŒ‰éˆ•æ™‚å¯ä»¥ç§»å‹•åœ°åœ–ä¸­å¿ƒåˆ°è©²åœ°é»
// æ³¨æ„ï¼šé€™å€‹å‡½æ•¸éœ€è¦è¢«å®šç¾©åœ¨å…¨åŸŸç¯„åœï¼Œæ‰èƒ½è¢« HTML çš„ onclick äº‹ä»¶å‘¼å«ã€‚
window.zoomToLocation = function(lat, lng) {
    // é€™è£¡å¯ä»¥åŠ å…¥æ›´å¤šé‚è¼¯ï¼Œä¾‹å¦‚åœ¨æ‚¨ç¶²é çš„å´æ¬„é¡¯ç¤ºè©²æ—…å®¿çš„ AI ä»‹ç´¹
    console.log(`å°èˆªè‡³ï¼š${lat}, ${lng}`);
    // æ‚¨å¯ä»¥è®“åœ°åœ–ç§»å‹•åˆ°è©²é»ä¸¦æ”¾å¤§
    // map.setView([lat, lng], 14); 
    alert(`é»æ“Šäº† ${lat}, ${lng} çš„è©³ç´°è³‡æ–™æŒ‰éˆ•ï¼`);
}
