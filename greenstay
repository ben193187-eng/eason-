<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ£®å¢ƒæ¼«éŠï½œè‹—æ —ç¶ è‰²æ—…å®¿åœ°åœ–</title>
    
    <link 
        rel="stylesheet" 
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/SJPMeR/JZQj7BwWc8=" 
        crossorigin=""
    />
    
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* ç¢ºä¿åœ°åœ–å®¹å™¨æœ‰æ˜ç¢ºçš„é«˜åº¦ï¼Œå¦å‰‡åœ°åœ–ç„¡æ³•é¡¯ç¤º */
        #map {
            height: 500px; /* æ‚¨å¯ä»¥ä¾æ“šéœ€æ±‚èª¿æ•´é«˜åº¦ */
            width: 100%;
            border: 1px solid #00897b; /* é…åˆç¶ è‰²ä¸»é¡Œçš„é‚Šæ¡† */
            border-radius: 8px;
            margin-top: 15px;
        }
    </style>
</head>
<body>

    <header>
        <h1>ğŸŒ³ æ£®å¢ƒæ¼«éŠ | Miaoli Green-Stay Map</h1>
        <p>æ¢ç´¢è‹—æ —åœ¨åœ°ã€æ°¸çºŒçš„æ–‡é’æ„Ÿæ—…å®¿ã€‚çµåˆ AI åŠ›é‡ï¼Œç‚ºæ‚¨æä¾›å€‹æ€§åŒ–æ—…éŠå»ºè­°ã€‚</p>
    </header>

    <main>
        
        <section class="data-section">
            <h2>ğŸ¨ æ—…å®¿èˆ‡æ™¯é»è³‡è¨Š</h2>
            <p>--- é€™è£¡å¯ä»¥æ”¾æ‚¨ç¾æœ‰çš„æ—…å®¿åˆ—è¡¨å’Œæ–°å¢è¡¨å–® ---</p>
        </section>
        
        <section class="map-container">
            <h2>ğŸŒ è‹—æ —ç¶ è‰²æ—…å®¿åœ°é»ä¸€è¦½</h2>
            <div id="map"></div>
        </section>

    </main>

    <script 
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20n6a9c8z9G6yH2Gq8W8m6Cg4Yc4kQ8jF0c4pS+g="
        crossorigin=""
    ></script>

    <script src="main.js"></script>
    
</body>
</html>
/* åŸºæœ¬é‡ç½®èˆ‡æ’ç‰ˆ */
body {
    font-family: 'å¾®è»Ÿæ­£é»‘é«”', 'Microsoft JhengHei', Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f4f4f9;
    color: #333;
}

header {
    text-align: center;
    padding: 15px 0;
    background-color: #e0f2f1; /* æ·ºç¶ è‰²èƒŒæ™¯ */
    color: #004d40;
    margin-bottom: 25px;
    border-radius: 8px;
}

h1 {
    font-size: 2em;
    margin-bottom: 5px;
}

h2 {
    color: #00897b; /* æ·±ç¶ è‰²æ¨™é¡Œ */
    border-bottom: 2px solid #b2dfdb;
    padding-bottom: 5px;
}

main {
    max-width: 1200px;
    margin: auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.map-container {
    margin-top: 30px;
}

/* ç¢ºä¿ Leaflet çš„å½ˆå‡ºè¦–çª—æ¨£å¼æ­£å¸¸ */
.leaflet-popup-content-wrapper {
    border-radius: 5px;
}
// =======================================================
// ** ğŸ“Œ è«‹æ›¿æ›æ­¤è™•çš„è³‡æ–™ç‚ºæ‚¨å¯¦éš›çš„æ—…å®¿èˆ‡æ™¯é»æ¸…å–®ï¼ **
// ç¢ºä¿æ‚¨æä¾› 'name' (åç¨±), 'lat' (ç·¯åº¦), å’Œ 'lng' (ç¶“åº¦)
// =======================================================
const lodgingsData = [
    { name: "å±±å±…æ­²æœˆ (ç¶ æŒ‡æ¨™)", lat: 24.4205, lng: 120.9085, style: "æ–‡é’é¢¨" },
    { name: "æ£®æ—ä¹‹å®¶", lat: 24.5670, lng: 120.8250, style: "ç”Ÿæ…‹æ°¸çºŒ" },
    { name: "ä¸‰ç¾©å¥½å®¢æ°‘å®¿", lat: 24.3820, lng: 120.7600, style: "å®¶åº­" },
    { name: "å—åº„è€è¡—æ°‘å®¿", lat: 24.5880, lng: 121.0120, style: "å‚³çµ±" },
    { name: "å¤§æ¹–è‰è“åœ’å€æ™¯é»", lat: 24.4172, lng: 120.8525, style: "æ™¯é»" },
];

// è‹—æ —ç¸£ä¸­å¿ƒåº§æ¨™å’Œèµ·å§‹ç¸®æ”¾ç­‰ç´š (Leaflet ä½¿ç”¨ [ç·¯åº¦, ç¶“åº¦] æ ¼å¼)
const MIAOLI_CENTER = [24.500, 120.900];
const INITIAL_ZOOM = 10;

// =======================================================
// ä¸»ç¨‹å¼ç¢¼é‚è¼¯
// =======================================================
document.addEventListener('DOMContentLoaded', (event) => {
    // æª¢æŸ¥åœ°åœ–å®¹å™¨æ˜¯å¦å­˜åœ¨å¾Œæ‰åˆå§‹åŒ–
    if (document.getElementById('map')) {
        initializeLeafletMap();
    }
});

function initializeLeafletMap() {
    
    // 1. åˆå§‹åŒ–åœ°åœ–å¯¦ä¾‹ (Map Object)
    // 'map' æ˜¯ HTML ä¸­ div çš„ id
    const map = L.map('map').setView(MIAOLI_CENTER, INITIAL_ZOOM);
    
    // 2. åŠ å…¥ OpenStreetMap åœ–å±¤ (åœ°åœ–åº•åœ–)
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        // ç‰ˆæ¬Šè³‡è¨Šæ˜¯ä½¿ç”¨ OpenStreetMap çš„è¦ç¯„
        attribution: 'åœ°åœ–è³‡æ–™ Â© <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> è²¢ç»è€…'
    }).addTo(map);

    // 3. éæ­·æ‰€æœ‰æ—…å®¿ä¸¦åœ¨åœ°åœ–ä¸Šæ”¾ç½®æ¨™è¨˜ (Marker)
    lodgingsData.forEach(lodging => {
        
        // ç¢ºä¿åº§æ¨™å­˜åœ¨
        if (lodging.lat && lodging.lng) {
            
            // å»ºç«‹å½ˆå‡ºå¼è³‡è¨Šè¦–çª—çš„å…§å®¹ (é»æ“Šæ¨™è¨˜æœƒé¡¯ç¤ºçš„è³‡è¨Š)
            const popupContent = `
                <h4>${lodging.name}</h4>
                <p>é¡å‹ï¼š${lodging.style}</p>
                <button onclick="alert('æ‚¨é»æ“Šäº† ${lodging.name} çš„è©³æƒ…ï¼')">æŸ¥çœ‹ AI æ·±åº¦ä»‹ç´¹</button>
            `;
            
            // L.marker() å‰µå»ºæ¨™è¨˜ï¼Œåº§æ¨™æ ¼å¼ç‚º [ç·¯åº¦, ç¶“åº¦]
            L.marker([lodging.lat, lodging.lng]) 
                .addTo(map)
                .bindPopup(popupContent); // å°‡è³‡è¨Šè¦–çª—ç¶å®šåˆ°æ¨™è¨˜ä¸Š
        }
    });
    
    // 4. (å¯é¸) èª¿æ•´åœ°åœ–è¦–é‡ï¼Œè®“æ‰€æœ‰æ¨™è¨˜éƒ½èƒ½è¢«çœ‹åˆ°
    if (lodgingsData.length > 0) {
        // å–å¾—æ‰€æœ‰æ¨™è¨˜çš„åº§æ¨™
        const bounds = lodgingsData.map(l => [l.lat, l.lng]);
        // è®“åœ°åœ–èª¿æ•´ç¸®æ”¾å’Œä¸­å¿ƒé»ä¾†åŒ…å«é€™äº›åº§æ¨™
        map.fitBounds(bounds, { 
            padding: [50, 50] // é‚Šç·£ç•™ç™½
        }); 
    }
}
